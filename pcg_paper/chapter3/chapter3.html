<h1>3  A Procedural Framework</h1>

<p>Procedural techniques use a variety of methods to generate new content. However, the characteristics shared between techniques have not been widely explored. Consequently, there are no widely accepted patterns or best practices for the development of new procedural techniques. Our research builds on the idea of pipeline stages or steps presented by Roden and Parberry [2004] as a process for procedurally generating spatial content. We then apply that process to two specific problem domains.</p>

<p>We propose two specific steps that lend themselves well to the procedural generation of certain types of content. The purpose of the first step is to capture the topological relationships between elements without worrying about absolute spatial positioning or potential difficulties arising therefrom. The first step employs a set of rules in the form of a context-free grammar. These rules are then iterated to produce a graph representation of the content. In the second step, the nodes and edges of the graph are expanded to a corresponding spatial representation. We apply this process to the creation of house floorplans and video game maps and suggest other problem domains that have similar characteristics.</p>

<p>As previously mentioned, the first step uses a grammar to generate a representation of the content encoded in a graph. The graph representation of the content must be constructed such that the nodes represent elements (e.g., rooms or territories) and the edges represent a relationship (e.g., adjacency) between the elements. The nodes and edges should represent only relative size or position. The ruleset should consist of human readable rules that control the generation of the graph. However, a ruleset alone suffers from a lack of global state; each rule is applied locally to a single element. Our technique uses a statistics object to maintain a concept of global state and rules can be designed to check the conditions of the global state before they are applied. This is similar to the conditional check in CGA Shape [Muller et al 2006].</p>

<p>The second step focuses on the expansion of the graph representation into an actual physical representation suitable for eventual display. It is during this step that absolute sizes and positions of the elements are determined. There are many different algorithms that could be used at this step due to the fact that the algorithm must be specific to the kind of content to be created. The floorplan and video game map techniques will describe two algorithms for this step in detail and further methods will be explored in the discussion section.</p>

<p>The primary advantage of the two-step process is that it partitions the problem to make it more manageable. The first step solves the problem of the relationship between entities without considering the exact spatial layout. The second step solves the problem of the spatial layout without considering the relationships between entities. We assume that if a model of the relationships can be constructed in the first step then a solution to the spatial layout problem can be discovered during the second step. Additionally, the two steps can function independently as long as a well-defined interface exists for the data structure to be passed between step one and step two. From our own experience, this partitioning of the problem space has shown to be more tractable than tackling both problems together.</p>

<!-- MW: why is doing it all at once hard? -->